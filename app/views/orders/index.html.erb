<nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
  <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="#"><%= current_employee.restaurant.name.capitalize %></a>
  <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-toggle="collapse" data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
  <ul class="navbar-nav px-3">
    <li class="nav-item text-nowrap">
      <a class="nav-link" href="#">Sign out</a>
    </li>
  </ul>
</nav>

<div class="container-fluid">
  <div class="row">
    <%= render 'shared/side_bar' %>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">

      <h2 class="mt-5"><%= current_employee.restaurant.name.capitalize %>'s Orders</h2>
      <hr>
      <div class="table-responsive">
        <div class="container d-flex flex-wrap">
          <% @tables.each do |table| %>
            <div class="card m-2" style="width: 30rem;">
              <div class="card-body">
                <h5 class="card-title"><%= table.name %></h5>
                <h6 class="card-subtitle mb-2 text-muted">total table till now: <%= humanized_money_with_symbol(table.orders.sum(:total_price_cents)) %></h6>
                <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                <!-- drop down -->
                <% table.orders.each do |order| %>
                <div class="accordion" id="accordionExample">
                  <div class="card">
                    <div class="card-header" id="headingOne">
                      <h2 class="mb-1">
                        <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                          Order #<%= order.id %>
                        </button>
                      </h2>
                    </div>

                    <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                      <div class="card-body">
                        <table class="table">
                          <thead>
                            <tr>
                              <th scope="col">MenuItem </th>
                              <th scope="col">Quantity</th>
                              <th scope="col">Cust Comment</th>
                              <th scope="col">status</th>
                            </tr>
                          </thead>
                          <tbody>
                        <% order.line_items.where(ordered: true).each do |line| %>
                            <tr>
                              <td><%= line.menu_item.title%> </td>
                              <td><%= line.quantity%></td>
                              <td><%= line.comment%></td>
                            <% if line.dispatched_from_kitchen == true %>
                              <td><span class="badge badge-success">Dispatched</span></td>
                            <% else %>
                              <td><span class="badge badge-warning">Not dispatched</span></td>
                            <% end %>
                            </tr>
                        <% end %>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
                <% end %>

              </div>
            </div>
          <% end %>
        </div>
      </div>
    </main>
  </div>
</div>


