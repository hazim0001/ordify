


<div class="container-fluid">
  <div class="row">
    <%= render 'shared/side_bar' %>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4" style="margin-left: 13em !important;">

      <h2 class="mt-5"><%= current_employee.restaurant.name.capitalize %>'s Orders</h2>
      <hr>

      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Order#</th>
            <th scope="col">Customer Number</th>
            <th scope="col">Table</th>
            <th scope="col">Order status</th>
            <th scope="col">Order total</th>
            <th scope="col">Payment status</th>
            <th scope="col">Items count</th>
          </tr>
        </thead>
        <tbody>
          <% @orders.each do |order| %>
          <tr data-toggle="modal" data-target="#ModalOrder<%= order.id %>">
            <th scope="row"><%= order.id %></th>
            <td><%= order.user_number%></td>
            <td><%= order.table.name%></td>

            <% if order.dispatched == true %>
              <td><span class="badge badge-success">Dispatched</span></td>
            <% else %>
              <td><span class="badge badge-warning">Not dispatched</span></td>
            <% end %>

            <td><%= humanized_money_with_symbol(order.total_price)%></td>

            <% if order.status == "not paid" %>
              <td><span class="badge badge-warning">Not Paid</span></td>
            <% else %>
              <td><span class="badge badge-success">Paid</span></td>
            <% end %>

            <td><%= order.line_items.count%></td>

          </tr>
          <!-- modaal -->
          <div class="modal fade" id="ModalOrder<%= order.id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel2" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
              <div class="modal-content">

                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel2">Order details</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>

                <div class="modal-body">
                  <div class="container mt-3 bg-white">
                    <div class="row">
                      <div class="col-8 mx-auto">

                      </div>
                    </div>
                  </div>
                </div>

                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>

              </div>
            </div>
          </div>
          <!-- end of order iteration -->
          <% end %>
        </tbody>
      </table>
    </main>
  </div>
</div>


